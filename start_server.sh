#!/bin/bash

echo "========================================"
echo "ุฑุงูโุงูุฏุงุฒ ฺุชโุจุงุช ุจุฑูุฏ ุชุดฺฉุฑ"
echo "========================================"
echo ""

# ุจุฑุฑุณ ูุฌูุฏ Python
if ! command -v python3 &> /dev/null; then
    echo "โ Python ูุตุจ ูุดุฏู ุงุณุช!"
    echo "ูุทูุง Python 3.11+ ุฑุง ูุตุจ ฺฉูุฏ"
    exit 1
fi

echo "โ Python ุงูุช ุดุฏ"
echo ""

# ุจุฑุฑุณ ูุฌูุฏ ูุงู .env
if [ ! -f .env ]; then
    echo "โ๏ธ  ูุงู .env ุงูุช ูุดุฏ"
    echo "ุฏุฑ ุญุงู ฺฉูพ ุงุฒ .env.example..."
    cp .env.example .env
    echo "โ ูุงู .env ุงุฌุงุฏ ุดุฏ"
    echo "โ๏ธ  ูุทูุง ูุงู .env ุฑุง ุจุงุฒ ฺฉุฑุฏู ู API key ุฑุง ูุงุฑุฏ ฺฉูุฏ"
    echo ""
    exit 1
fi

echo "โ ูุงู .env ุงูุช ุดุฏ"
echo ""

# ูุตุจ ูุงุจุณุชฺฏโูุง
echo "ุฏุฑ ุญุงู ูุตุจ ูุงุจุณุชฺฏโูุง..."
pip3 install -q -r requirements.txt
if [ $? -ne 0 ]; then
    echo "โ ุฎุทุง ุฏุฑ ูุตุจ ูุงุจุณุชฺฏโูุง"
    exit 1
fi

echo "โ ูุงุจุณุชฺฏโูุง ูุตุจ ุดุฏูุฏ"
echo ""

# ุงุฌุฑุง ุณุฑูุฑ
echo "========================================"
echo "๐ ุฏุฑ ุญุงู ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ..."
echo "========================================"
echo ""
echo "ุขุฏุฑุณ: http://localhost:5000"
echo "ุจุฑุง ุชููู ุณุฑูุฑุ Ctrl+C ุฑุง ูุดุงุฑ ุฏูุฏ"
echo ""

python3 chatbot_web.py

